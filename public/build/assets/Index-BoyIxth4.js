import{b as t,r as V,j as e,H as J,c as Q,a as S}from"./app-DAYjwf4I.js";import{S as X}from"./Sidebar-DmPqVZOo.js";import{H as Y}from"./Header-Bn6vvdQ6.js";import{u as Z,I as ee}from"./ImportModal-exMXTG7z.js";import{D as ae}from"./DeleteConfirmationModal-CPLFuKjp.js";import{T as re}from"./Toast-Q_C-JISc.js";/* empty css            */function te({show:l,onClose:u,onSubmit:g,formData:d,setFormData:M,prodi:h,isEdit:p,isLoading:m=!1}){const{register:i,handleSubmit:y,formState:{errors:n},reset:c}=Z({defaultValues:d});if(t.useEffect(()=>{l&&c(d)},[l,d,c]),!l)return null;const x=s=>{Object.assign(d,s),M(s),g({preventDefault:()=>{}})};return V.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",style:{backgroundColor:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center"},onClick:s=>{s.target===s.currentTarget&&u()},children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-2xl mx-4",onClick:s=>s.stopPropagation(),children:e.jsx("form",{onSubmit:y(x),children:e.jsxs("div",{className:"px-6 pt-6 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:p?"Edit Mata Kuliah":"Tambah Mata Kuliah"}),e.jsx("button",{type:"button",onClick:u,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["Kode Mata Kuliah ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...i("kode_mk",{required:"Kode mata kuliah wajib diisi"}),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Contoh: TIF101"}),n.kode_mk&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:n.kode_mk.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["Nama Mata Kuliah ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...i("nama_mk",{required:"Nama mata kuliah wajib diisi"}),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Contoh: Pemrograman Dasar"}),n.nama_mk&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:n.nama_mk.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["SKS ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",...i("sks",{required:"SKS wajib diisi",min:{value:1,message:"SKS minimal 1"},max:{value:6,message:"SKS maksimal 6"}}),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"1-6"}),n.sks&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:n.sks.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["Program Studi ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...i("prodi_id",{required:"Program studi wajib dipilih"}),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Pilih Program Studi"}),h.map(s=>e.jsxs("option",{value:s.id,children:[s.nama_prodi," - ",s.fakultas.nama_fakultas]},s.id))]}),n.prodi_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:n.prodi_id.message})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:u,disabled:m,className:"px-6 py-2.5 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Batal"}),e.jsxs("button",{type:"submit",disabled:m,className:"px-6 py-2.5 text-sm font-semibold text-white bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center gap-2",children:[m&&e.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),m?"Menyimpan...":p?"Perbarui":"Simpan"]})]})]})})})}),document.body)}function me({mataKuliah:l,prodi:u,flash:g}){console.log("MataKuliah Index loaded",{mataKuliah:l,prodi:u});const[d,M]=t.useState(()=>{if(typeof window<"u"){const a=localStorage.getItem("darkMode");return a!==null?a==="true":window.matchMedia("(prefers-color-scheme: dark)").matches}return!1}),[h,p]=t.useState(()=>typeof window<"u"?window.innerWidth>=1024:!0),[m,i]=t.useState(!1),[y,n]=t.useState("create"),[c,x]=t.useState(null),[s,j]=t.useState(!1),[D,_]=t.useState(!1),[C,L]=t.useState(null),[w,P]=t.useState(""),[T,H]=t.useState(""),[F,E]=t.useState(!1),[A,z]=t.useState(""),[B,U]=t.useState("success"),[v,b]=t.useState(!1),[f,N]=t.useState({kode_mk:"",nama_mk:"",sks:"",prodi_id:""}),k=(a,r)=>{z(a),U(r),E(!0)};t.useEffect(()=>{g?.success&&k(g.success,"success"),g?.error&&k(g.error,"error")},[g]);const W=()=>{n("create"),N({kode_mk:"",nama_mk:"",sks:"",prodi_id:""}),i(!0)},O=a=>{n("edit"),x(a),N({kode_mk:a.kode_mk,nama_mk:a.nama_mk,sks:a.sks.toString(),prodi_id:a.prodi_id.toString()}),i(!0)},$=a=>{a.preventDefault(),b(!0),y==="create"?(console.log("Creating mata kuliah:",f),S.post("/admin/matakuliah",f,{preserveScroll:!0,onSuccess:r=>{console.log("Create success",r),i(!1),N({kode_mk:"",nama_mk:"",sks:"",prodi_id:""})},onError:r=>{console.error("Create error:",r),i(!1);const o=Object.values(r).flat(),K=o.length>0?o.join(", "):"Gagal menambahkan data mata kuliah";k(K,"error")},onFinish:()=>{console.log("Create finished"),b(!1)}})):c&&(console.log("Updating mata kuliah:",c.id,f),S.post(`/admin/matakuliah/${c.id}`,{...f,_method:"PUT"},{preserveScroll:!0,onSuccess:r=>{console.log("Update success",r),i(!1),x(null)},onError:r=>{console.error("Update error:",r),i(!1),x(null);const o=Object.values(r).flat(),K=o.length>0?o.join(", "):"Gagal memperbarui data mata kuliah";k(K,"error")},onFinish:()=>{console.log("Update finished"),b(!1)}}))},q=a=>{x(a),j(!0)},G=()=>{c&&(b(!0),console.log("Deleting mata kuliah:",c.id),S.delete(`/admin/matakuliah/${c.id}`,{preserveScroll:!0,onSuccess:()=>{console.log("Delete success"),j(!1),x(null)},onError:a=>{console.error("Delete error:",a),j(!1),x(null);const r=Object.values(a).flat(),o=r.length>0?r.join(", "):"Gagal menghapus data mata kuliah";k(o,"error")},onFinish:()=>{b(!1)}}))},R=a=>{if(a.preventDefault(),!C){alert("Silakan pilih file terlebih dahulu");return}const r=new FormData;r.append("file",C),S.post("/admin/matakuliah/import",r,{onSuccess:o=>{console.log("Import success:",o.props.flash),_(!1),L(null)},onError:o=>{console.log("Import errors:",o)}})},I=l.data.filter(a=>{const r=a.nama_mk.toLowerCase().includes(w.toLowerCase())||a.kode_mk.toLowerCase().includes(w.toLowerCase())||a.prodi.nama_prodi.toLowerCase().includes(w.toLowerCase()),o=T===""||a.prodi_id.toString()===T;return r&&o});return t.useEffect(()=>{console.log("MataKuliah useEffect running",{darkMode:d}),d?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",String(d))},[d]),console.log("About to render, showModal:",m),e.jsxs("div",{className:d?"dark":"",style:{minHeight:"100vh",backgroundColor:d?"#111827":"#f3f4f6"},children:[e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-300",children:[e.jsx(J,{title:"Mata Kuliah"}),e.jsx(X,{sidebarOpen:h,setSidebarOpen:p,activeMenu:"matakuliah"}),e.jsxs("div",{className:`p-4 transition-all duration-300 ${h?"lg:ml-64":"lg:ml-0"}`,children:[e.jsx("h1",{style:{color:"white",fontSize:"24px",padding:"20px"},children:"MATA KULIAH PAGE TEST"}),e.jsx(Y,{sidebarOpen:h,setSidebarOpen:p,darkMode:d,setDarkMode:M,title:"Mata Kuliah",subtitle:"Kelola data mata kuliah"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 justify-end",children:[e.jsxs("button",{onClick:()=>_(!0),className:"inline-flex items-center px-5 py-2.5 border border-transparent rounded-xl shadow-lg text-sm font-semibold text-white bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 transform hover:scale-105 transition-all duration-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Import Excel"]}),e.jsxs("button",{onClick:W,className:"inline-flex items-center px-5 py-2.5 border border-transparent rounded-xl shadow-lg text-sm font-semibold text-white bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 transform hover:scale-105 transition-all duration-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Tambah Mata Kuliah"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pencarian & Filter"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Cari kode, nama mata kuliah, prodi...",value:w,onChange:a=>P(a.target.value),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500"})}),e.jsx("div",{children:e.jsxs("select",{value:T,onChange:a=>H(a.target.value),className:"px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Semua Prodi"}),u.map(a=>e.jsx("option",{value:a.id,children:a.nama_prodi},a.id))]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl rounded-2xl overflow-hidden border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Kode MK"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nama Mata Kuliah"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"SKS"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Prodi"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:I.length>0?I.map((a,r)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:r+1}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-300",children:a.kode_mk}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-gray-300",children:a.nama_mk}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-900 dark:text-gray-300",children:e.jsxs("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:[a.sks," SKS"]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-gray-300",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.prodi.nama_prodi}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.prodi.fakultas.nama_fakultas})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>O(a),className:"inline-flex items-center justify-center p-2 rounded-lg bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700 transform hover:scale-110 transition-all duration-200 shadow-md hover:shadow-lg",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>q(a),className:"inline-flex items-center justify-center p-2 rounded-lg bg-gradient-to-r from-red-500 to-pink-600 text-white hover:from-red-600 hover:to-pink-700 transform hover:scale-110 transition-all duration-200 shadow-md hover:shadow-lg",title:"Hapus",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-sm text-gray-500 dark:text-gray-400",children:"Tidak ada data mata kuliah"})})})]})}),l.links&&l.links.length>3&&e.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Menampilkan ",e.jsx("span",{className:"font-semibold",children:l.from||0})," - ",e.jsx("span",{className:"font-semibold",children:l.to||0})," dari ",e.jsx("span",{className:"font-semibold",children:l.total})," data"]}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:l.links.map((a,r)=>a.url?e.jsx(Q,{href:a.url,preserveScroll:!0,className:`px-3 py-2 text-sm rounded-lg transition-all duration-200 ${a.active?"bg-indigo-600 text-white font-semibold shadow-md":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600"}`,dangerouslySetInnerHTML:{__html:a.label}},r):e.jsx("span",{className:"px-3 py-2 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500 border border-gray-200 dark:border-gray-600 cursor-not-allowed",dangerouslySetInnerHTML:{__html:a.label}},r))})]})})]})]})]})]}),m&&e.jsx(te,{show:m,onClose:()=>i(!1),onSubmit:$,formData:f,setFormData:N,prodi:u,isEdit:y==="edit",isLoading:v}),e.jsx(ae,{show:s,onClose:()=>j(!1),onConfirm:G,title:"Hapus Mata Kuliah",message:`Apakah Anda yakin ingin menghapus mata kuliah "${c?.nama_mk}"?`,itemName:c?.kode_mk||"",isLoading:v}),e.jsx(ee,{show:D,onClose:()=>{_(!1),L(null)},onSubmit:R,file:C,setFile:L,templateUrl:"/admin/matakuliah/template/download",entityName:"Mata Kuliah",isLoading:v}),F&&e.jsx(re,{message:A,type:B,onClose:()=>E(!1)}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999] flex items-center justify-center",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-gray-200 dark:border-gray-700 rounded-full"}),e.jsx("div",{className:"absolute top-0 left-0 w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Memproses..."}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Mohon tunggu sebentar"})]}),e.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:"0%"})]})})]})}export{me as default};
