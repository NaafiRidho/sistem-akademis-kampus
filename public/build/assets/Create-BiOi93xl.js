import{b as d,j as e,H as N,c as w,a as g}from"./app-tp0wqukF.js";import{D as M}from"./DosenSidebar-BEKHv2yG.js";import{H as C}from"./Header-BlC7YqyD.js";/* empty css            */function D({mataKuliahList:s=[]}){const[n,f]=d.useState(()=>{if(typeof window<"u"){const a=localStorage.getItem("darkMode");return a!==null?a==="true":window.matchMedia("(prefers-color-scheme: dark)").matches}return!1}),[u,p]=d.useState(()=>typeof window<"u"?window.innerWidth>=1024:!0),[r,x]=d.useState({mata_kuliah_id:"",judul:"",file:null}),[t,i]=d.useState({}),[h,c]=d.useState(!1),[m,j]=d.useState("");d.useEffect(()=>{n?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",String(n))},[n]);const b=a=>{const l=a.target.files?.[0];if(l){if(l.size>10*1024*1024){i({...t,file:"Ukuran file maksimal 10MB"});return}if(!["application/pdf","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(l.type)){i({...t,file:"Format file harus PDF, PPT, atau DOC"});return}x({...r,file:l}),j(l.name),i({...t,file:""})}},k=a=>{a.preventDefault(),c(!0),i({});const l={};if(r.mata_kuliah_id||(l.mata_kuliah_id="Mata kuliah harus dipilih"),r.judul.trim()||(l.judul="Judul materi harus diisi"),r.file||(l.file="File harus diupload"),Object.keys(l).length>0){i(l),c(!1);return}const o=new FormData;o.append("mata_kuliah_id",r.mata_kuliah_id),o.append("judul",r.judul),r.file&&o.append("file",r.file),g.post("/dosen/materi",o,{preserveScroll:!0,onSuccess:()=>{c(!1)},onError:v=>{i(v),c(!1)}})},y=()=>{if(!m)return null;switch(m.split(".").pop()?.toLowerCase()){case"pdf":return e.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})});case"ppt":case"pptx":return e.jsx("svg",{className:"w-8 h-8 text-orange-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})});case"doc":case"docx":return e.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})});default:return null}};return e.jsx("div",{className:n?"dark":"",children:e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-300",children:[e.jsx(N,{title:"Upload Materi"}),e.jsx(M,{sidebarOpen:u,setSidebarOpen:p,activeMenu:"materi"}),e.jsxs("div",{className:`p-4 transition-all duration-300 ${u?"lg:ml-64":"lg:ml-0"}`,children:[e.jsx(C,{sidebarOpen:u,setSidebarOpen:p,darkMode:n,setDarkMode:f,title:"Upload Materi",subtitle:"Upload materi pembelajaran untuk mahasiswa"}),e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("div",{className:"mb-4",children:e.jsxs(w,{href:"/dosen/materi",className:"inline-flex items-center px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Kembali ke Daftar Materi"]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Form Upload Materi"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Upload file PDF, PPT, atau DOC (maksimal 10MB)"})]}),e.jsxs("form",{onSubmit:k,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Mata Kuliah"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:r.mata_kuliah_id,onChange:a=>x({...r,mata_kuliah_id:a.target.value}),className:`w-full px-4 py-2.5 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${t.mata_kuliah_id?"border-red-500":"border-gray-300 dark:border-gray-600"}`,disabled:!s||s.length===0,children:[e.jsx("option",{value:"",children:!s||s.length===0?"Tidak ada mata kuliah yang diampu":"Pilih Mata Kuliah"}),s&&s.map(a=>e.jsxs("option",{value:a.id,children:[a.kode_mk," - ",a.nama_mk," (",a.sks," SKS)"," ",a.kelas&&a.kelas.length>0?`- Kelas: ${a.kelas.join(", ")}`:""]},a.id))]}),t.mata_kuliah_id&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.mata_kuliah_id}),(!s||s.length===0)&&e.jsx("p",{className:"mt-2 text-sm text-yellow-600 dark:text-yellow-400",children:"⚠️ Anda belum memiliki jadwal mengajar. Silakan hubungi admin untuk menambahkan jadwal."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Judul Materi"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:r.judul,onChange:a=>x({...r,judul:a.target.value}),placeholder:"Contoh: Pengenalan Algoritma dan Pemrograman",className:`w-full px-4 py-2.5 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${t.judul?"border-red-500":"border-gray-300 dark:border-gray-600"}`}),t.judul&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.judul})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Upload File"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center ${t.file?"border-red-500":"border-gray-300 dark:border-gray-600"}`,children:[e.jsx("input",{type:"file",id:"file-upload",accept:".pdf,.ppt,.pptx,.doc,.docx",onChange:b,className:"hidden"}),e.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center",children:m?e.jsxs("div",{className:"flex items-center space-x-3",children:[y(),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:m}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.file?`${(r.file.size/1024/1024).toFixed(2)} MB`:""})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:"Klik untuk upload"})," ","atau drag and drop"]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"PDF, PPT, PPTX, DOC, DOCX (maksimal 10MB)"})]})})]}),t.file&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.file})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>g.get("/dosen/materi"),className:"px-6 py-2.5 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",disabled:h,className:`px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-200 flex items-center space-x-2 ${h?"opacity-50 cursor-not-allowed":""}`,children:h?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Mengupload..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("span",{children:"Upload Materi"})]})})]})]})]}),e.jsx("div",{className:"mt-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:"Tips Upload Materi"}),e.jsx("div",{className:"mt-2 text-sm text-blue-700 dark:text-blue-400",children:e.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[e.jsx("li",{children:"Gunakan judul yang jelas dan deskriptif"}),e.jsx("li",{children:"File maksimal 10MB untuk performa optimal"}),e.jsx("li",{children:"Format yang didukung: PDF, PPT, PPTX, DOC, DOCX"}),e.jsx("li",{children:"Pastikan file dapat dibuka dengan baik sebelum diupload"})]})})]})]})})]})]})]})})}export{D as default};
