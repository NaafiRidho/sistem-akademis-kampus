import{a as s,j as e,H as K,b as x}from"./app-ChGtWkZu.js";import{S as F}from"./Sidebar-BCuE4_9k.js";import{H as G}from"./Header-CIFYwiEZ.js";import{T as I}from"./Toast-BD0e8Ro6.js";/* empty css            */function O({nilai:r,mahasiswa:B,mataKuliah:D,prodi:j,kelas:f,filters:l,flash:i}){const[n,v]=s.useState(()=>{if(typeof window<"u"){const a=localStorage.getItem("darkMode");return a!==null?a==="true":window.matchMedia("(prefers-color-scheme: dark)").matches}return!1}),[g,p]=s.useState(()=>typeof window<"u"?window.innerWidth>=1024:!0),[c,N]=s.useState(l.search||""),[u,S]=s.useState(""),[o,_]=s.useState(l.prodi_id||""),[C,h]=s.useState(l.kelas_id||""),[m,y]=s.useState(!1),[M,T]=s.useState(""),[E,L]=s.useState("success"),b=(a,t)=>{T(a),L(t),y(!0)};i.success&&!m&&b(i.success,"success"),i.error&&!m&&b(i.error,"error");const k=(a,t)=>{const d={...l};t?d[a]=t:delete d[a],a==="prodi_id"&&(delete d.kelas_id,h("")),x.get("/admin/nilai",d,{preserveState:!0,preserveScroll:!0})},w=r.data.filter(a=>{const t=a.mahasiswa.nama.toLowerCase().includes(c.toLowerCase())||a.mahasiswa.nim.toLowerCase().includes(c.toLowerCase())||a.mata_kuliah.nama.toLowerCase().includes(c.toLowerCase()),d=u===""||a.grade===u;return t&&d}),A=a=>{switch(a){case"A":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"B":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"C":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"D":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"E":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return s.useEffect(()=>{n?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",String(n))},[n]),e.jsxs("div",{className:n?"dark":"",children:[e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-300",children:[e.jsx(K,{title:"Nilai Mahasiswa"}),e.jsx(F,{sidebarOpen:g,setSidebarOpen:p,activeMenu:"nilai"}),e.jsxs("div",{className:`p-4 transition-all duration-300 ${g?"lg:ml-64":"lg:ml-0"}`,children:[e.jsx(G,{sidebarOpen:g,setSidebarOpen:p,darkMode:n,setDarkMode:v,title:"Nilai Mahasiswa",subtitle:"Kelola nilai mahasiswa"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("svg",{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pencarian & Filter"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx("input",{type:"text",placeholder:"Cari mahasiswa, NIM, mata kuliah...",value:c,onChange:a=>N(a.target.value),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500"})}),e.jsx("div",{children:e.jsxs("select",{value:o,onChange:a=>{const t=a.target.value;_(t),k("prodi_id",t)},className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Semua Prodi"}),j.map(a=>e.jsx("option",{value:a.id,children:a.nama_prodi},a.id))]})}),e.jsx("div",{children:e.jsxs("select",{value:C,onChange:a=>{const t=a.target.value;h(t),k("kelas_id",t)},disabled:!o,className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Semua Kelas"}),f.filter(a=>!o||a.prodi_id===parseInt(o)).map(a=>e.jsx("option",{value:a.id,children:a.nama_kelas},a.id))]})}),e.jsx("div",{children:e.jsxs("select",{value:u,onChange:a=>S(a.target.value),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Semua Grade"}),e.jsx("option",{value:"A",children:"A"}),e.jsx("option",{value:"B",children:"B"}),e.jsx("option",{value:"C",children:"C"}),e.jsx("option",{value:"D",children:"D"}),e.jsx("option",{value:"E",children:"E"})]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl rounded-2xl overflow-hidden border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"NIM"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nama Mahasiswa"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Mata Kuliah"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Tugas"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"UTS"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"UAS"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nilai Akhir"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Grade"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:w.length>0?w.map((a,t)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:t+1}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-300",children:a.mahasiswa.nim}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-gray-300",children:a.mahasiswa.nama}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-gray-300",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.mata_kuliah.nama}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[a.mata_kuliah.kode," â€¢ ",a.mata_kuliah.sks," SKS"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-900 dark:text-gray-300",children:a.tugas??0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-900 dark:text-gray-300",children:a.uts??0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-900 dark:text-gray-300",children:a.uas??0}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-bold text-blue-600 dark:text-blue-400",children:Number(a.nilai_akhir??0).toFixed(2)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm",children:e.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${A(a.grade)}`,children:a.grade})})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"px-6 py-8 text-center text-sm text-gray-500 dark:text-gray-400",children:"Tidak ada data nilai"})})})]})}),r.last_page>1&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Menampilkan ",e.jsx("span",{className:"font-medium",children:(r.current_page-1)*r.per_page+1})," -",e.jsxs("span",{className:"font-medium",children:[" ",Math.min(r.current_page*r.per_page,r.total)]})," dari",e.jsxs("span",{className:"font-medium",children:[" ",r.total]})," data"]}),e.jsxs("div",{className:"flex gap-2",children:[r.current_page>1&&e.jsx("button",{onClick:()=>{x.get("/admin/nilai",{...l,page:r.current_page-1},{preserveState:!0,preserveScroll:!0})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600",children:"Sebelumnya"}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:r.last_page},(a,t)=>t+1).filter(a=>a===1||a===r.last_page||a>=r.current_page-1&&a<=r.current_page+1).map((a,t,d)=>e.jsxs("span",{children:[t>0&&d[t-1]!==a-1&&e.jsx("span",{className:"px-2 py-2 text-gray-500",children:"..."}),e.jsx("button",{onClick:()=>{a!==r.current_page&&x.get("/admin/nilai",{...l,page:a},{preserveState:!0,preserveScroll:!0})},className:`px-4 py-2 text-sm font-medium rounded-lg ${a===r.current_page?"bg-blue-600 text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600"}`,children:a})]},a))}),r.current_page<r.last_page&&e.jsx("button",{onClick:()=>{x.get("/admin/nilai",{...l,page:r.current_page+1},{preserveState:!0,preserveScroll:!0})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600",children:"Selanjutnya"})]})]})})]})]})]})]}),m&&e.jsx(I,{message:M,type:E,onClose:()=>y(!1)})]})}export{O as default};
