import{a,r as $,j as e,u as V,H as q,b as c}from"./app-CQBC_FSQ.js";import{S as J,H as K}from"./Header-Mur1alXs.js";import{u as G}from"./index.esm-BLcWMkOJ.js";import{I as Q,D as X,T as Y}from"./Toast-Dz27-0Fs.js";/* empty css            */function Z({show:r,onClose:m,onSubmit:M,formData:o,setFormData:v,isEdit:n}){const{register:d,handleSubmit:b,formState:{errors:l},reset:k}=G({defaultValues:o});if(a.useEffect(()=>{r&&k(o)},[r,o,k]),!r)return null;const u=s=>{Object.assign(o,s),v(s),M({preventDefault:()=>{}})};return $.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",style:{backgroundColor:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center"},onClick:s=>{s.target===s.currentTarget&&m()},children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-lg mx-4",onClick:s=>s.stopPropagation(),children:e.jsxs("form",{onSubmit:b(u),children:[e.jsxs("div",{className:"px-6 pt-6 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n?"Edit Fakultas":"Tambah Fakultas"}),e.jsx("button",{type:"button",onClick:m,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Nama Fakultas ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...d("nama_fakultas",{required:"Nama fakultas wajib diisi"}),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Contoh: Fakultas Teknik"}),l.nama_fakultas&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:l.nama_fakultas.message})]})})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 px-6 py-4 sm:flex sm:flex-row-reverse gap-3",children:[e.jsxs("button",{type:"submit",className:"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-transparent rounded-lg shadow-sm text-base font-semibold text-white bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 transform hover:scale-105 transition-all duration-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),n?"Update":"Simpan"]}),e.jsx("button",{type:"button",onClick:m,className:"mt-3 sm:mt-0 w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-base font-semibold text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Batal"})]})]})})}),document.body)}function oe({fakultas:r,filters:m}){const o=V().props,[v,n]=a.useState(!1),[d,b]=a.useState({type:"info",message:"",details:[]}),[l,k]=a.useState(()=>{if(typeof window<"u"){const t=localStorage.getItem("darkMode");return t!==null?t==="true":window.matchMedia("(prefers-color-scheme: dark)").matches}return!1}),[u,s]=a.useState(()=>typeof window<"u"?window.innerWidth>=1024:!0),[F,T]=a.useState(m.search||""),[_,j]=a.useState(!1),[y,w]=a.useState(null),[L,x]=a.useState(!1),[D,E]=a.useState("create"),[I,N]=a.useState(!1),[h,g]=a.useState(null),[S,p]=a.useState({nama_fakultas:""});a.useEffect(()=>{l?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",String(l))},[l]),a.useEffect(()=>{console.log("=== Fakultas Flash Effect Triggered ==="),console.log("Props in effect:",o),console.log("Flash in effect:",o?.flash);const t=o?.flash;n(!1),setTimeout(()=>{t?.success?(console.log("Setting SUCCESS toast with message:",t.success),b({type:"success",message:t.success,details:t.import_errors||[]}),n(!0),console.log("Toast state set to TRUE")):t?.error&&(console.log("Setting ERROR toast with message:",t.error),b({type:"error",message:t.error,details:t.import_errors||[]}),n(!0),console.log("Toast state set to TRUE"))},100)},[o]);const C=()=>({nama_fakultas:""}),H=t=>{t.preventDefault(),c.get("/admin/fakultas",{search:F},{preserveState:!0,replace:!0})},B=t=>{g(t),N(!0)},P=()=>{h&&c.post(`/admin/fakultas/${h?.id}`,{_method:"DELETE"},{onSuccess:()=>{N(!1),g(null)}})},R=()=>{p(C()),E("create"),x(!0)},W=t=>{g(t),p({nama_fakultas:t.nama_fakultas}),E("edit"),x(!0)},A=t=>{t.preventDefault(),c.post("/admin/fakultas",S,{onSuccess:()=>{x(!1),p(C())}})},U=t=>{t.preventDefault(),c.post(`/admin/fakultas/${h?.id}`,{...S,_method:"PUT"},{onSuccess:()=>{x(!1),g(null)}})},z=t=>{if(t.preventDefault(),!y){alert("Silakan pilih file terlebih dahulu");return}const i=new FormData;i.append("file",y,y.name),c.post("/admin/fakultas/import",i,{forceFormData:!0,preserveState:!1,preserveScroll:!1,onSuccess:f=>{console.log("Import success:",f.props.flash),j(!1),w(null)},onError:f=>{console.log("Import errors:",f)}})};return e.jsxs("div",{className:l?"dark":"",children:[e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-300",children:[e.jsx(q,{title:"Data Fakultas"}),e.jsx(J,{sidebarOpen:u,setSidebarOpen:s,activeMenu:"fakultas"}),e.jsxs("div",{className:`p-4 transition-all duration-300 ${u?"lg:ml-64":"lg:ml-0"}`,children:[e.jsx(K,{sidebarOpen:u,setSidebarOpen:s,darkMode:l,setDarkMode:k,title:"Data Fakultas",subtitle:"Kelola data fakultas"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 justify-end",children:[e.jsxs("button",{onClick:()=>j(!0),className:"inline-flex items-center px-5 py-2.5 border border-transparent rounded-xl shadow-lg text-sm font-semibold text-white bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 transform hover:scale-105 transition-all duration-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Import Excel"]}),e.jsxs("button",{onClick:R,className:"inline-flex items-center px-5 py-2.5 border border-transparent rounded-xl shadow-lg text-sm font-semibold text-white bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 transform hover:scale-105 transition-all duration-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Tambah Fakultas"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pencarian Data"})]}),e.jsxs("form",{onSubmit:H,className:"flex gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Cari Nama Fakultas...",value:F,onChange:t=>T(t.target.value),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500"})}),e.jsx("div",{children:e.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 text-white px-6 py-3 text-base font-semibold rounded-lg transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Cari"]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl rounded-2xl overflow-hidden border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nama Fakultas"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Jumlah Prodi"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"Tidak ada data fakultas"})}):r.data.map((t,i)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:r.from+i}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:t.nama_fakultas}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:[t.prodi_count||0," Prodi"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>W(t),className:"inline-flex items-center justify-center p-2 rounded-lg bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700 transform hover:scale-110 transition-all duration-200 shadow-md hover:shadow-lg",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>B(t),className:"inline-flex items-center justify-center p-2 rounded-lg bg-gradient-to-r from-red-500 to-pink-600 text-white hover:from-red-600 hover:to-pink-700 transform hover:scale-110 transition-all duration-200 shadow-md hover:shadow-lg",title:"Hapus",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},t.id))})]})}),r.links.length>3&&e.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Menampilkan ",r.from," - ",r.to," dari ",r.total," data"]}),e.jsx("div",{className:"flex gap-2",children:r.links.map((t,i)=>{const f=t.url?"a":"span";return e.jsx(f,{href:t.url||"#",onClick:O=>{t.url&&(O.preventDefault(),c.get(t.url))},className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${t.active?"bg-blue-600 text-white":t.url?"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600":"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-600 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label}},i)})})]})})]})]})]})]}),e.jsx(Q,{show:_,onClose:()=>{j(!1),w(null)},onSubmit:z,file:y,setFile:w,templateUrl:"/admin/fakultas/template/download",entityName:"Fakultas"}),L&&e.jsx(Z,{show:L,onClose:()=>{x(!1),p(C())},onSubmit:D==="create"?A:U,formData:S,setFormData:p,isEdit:D==="edit"}),e.jsx(X,{show:I,onClose:()=>{N(!1),g(null)},onConfirm:P,title:"Hapus Data Fakultas",message:"Apakah Anda yakin ingin menghapus data fakultas",itemName:h?h.nama_fakultas:""}),v&&e.jsx(Y,{type:d.type,message:d.message,details:d.details,onClose:()=>{console.log("Toast onClose called"),n(!1)},duration:d.details?.length>0?8e3:5e3})]})}export{oe as default};
