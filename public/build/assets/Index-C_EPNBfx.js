import{b as r,j as e,H as L,a as l}from"./app-tp0wqukF.js";import{D as H}from"./DosenSidebar-BEKHv2yG.js";import{H as _}from"./Header-BlC7YqyD.js";import{D as A}from"./DeleteConfirmationModal-BST_hW77.js";/* empty css            */function K({materi:t,mataKuliahList:i,filters:m}){const[d,v]=r.useState(()=>{if(typeof window<"u"){const a=localStorage.getItem("darkMode");return a!==null?a==="true":window.matchMedia("(prefers-color-scheme: dark)").matches}return!1}),[c,h]=r.useState(()=>typeof window<"u"?window.innerWidth>=1024:!0),[j,x]=r.useState(!1),[o,u]=r.useState(null),[n,g]=r.useState(m?.mata_kuliah_id||""),[p,k]=r.useState(m?.kelas||""),[b,y]=r.useState([]);r.useEffect(()=>{d?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",String(d))},[d]),r.useEffect(()=>{if(n){const a=i.find(s=>s.id.toString()===n);y(a?.kelas||[])}else{const a=i.flatMap(s=>s.kelas);y([...new Set(a)])}},[n,i]);const f=()=>{l.get("/dosen/materi",{mata_kuliah_id:n||void 0,kelas:p||void 0},{preserveState:!0,preserveScroll:!0})},w=()=>{g(""),k(""),l.get("/dosen/materi")},N=a=>{u(a),x(!0)},M=()=>{o&&l.delete(`/dosen/materi/${o.id}`,{preserveScroll:!0,onSuccess:()=>{x(!1),u(null)}})},C=a=>{window.location.href=`/dosen/materi/${a}/download`},S=a=>{switch(a.split(".").pop()?.toLowerCase()){case"pdf":return e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})});case"ppt":case"pptx":return e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})});case"doc":case"docx":return e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})});default:return e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})})}};return e.jsxs("div",{className:d?"dark":"",children:[e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-300",children:[e.jsx(L,{title:"Materi Pembelajaran"}),e.jsx(H,{sidebarOpen:c,setSidebarOpen:h,activeMenu:"materi"}),e.jsxs("div",{className:`p-4 transition-all duration-300 ${c?"lg:ml-64":"lg:ml-0"}`,children:[e.jsx(_,{sidebarOpen:c,setSidebarOpen:h,darkMode:d,setDarkMode:v,title:"Materi Pembelajaran",subtitle:"Upload dan kelola materi pembelajaran untuk mahasiswa"}),e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Total ",t.total," materi"]}),e.jsxs("button",{onClick:()=>l.get("/dosen/materi/create"),className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-2.5 rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-200 flex items-center space-x-2 shadow-lg",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{children:"Upload Materi"})]})]}),e.jsx("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Mata Kuliah"}),e.jsxs("select",{value:n,onChange:a=>g(a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Semua Mata Kuliah"}),i.map(a=>e.jsxs("option",{value:a.id,children:[a.kode_mk," - ",a.nama_mk]},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Kelas"}),e.jsxs("select",{value:p,onChange:a=>k(a.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:b.length===0,children:[e.jsx("option",{value:"",children:"Semua Kelas"}),b.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:f,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),e.jsx("span",{children:"Filter"})]}),e.jsx("button",{onClick:w,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:"Reset Filter",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[t.data.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"Belum ada materi"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Mulai upload materi pembelajaran untuk mahasiswa."}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:()=>l.get("/dosen/materi/create"),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Upload Materi"]})})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Judul Materi"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Mata Kuliah"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"File"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Tanggal Upload"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.data.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.judul})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:a.mata_kuliah.kode_mk}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.mata_kuliah.nama_mk})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:S(a.file)}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.file.split(".").pop()?.toUpperCase()})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(a.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>C(a.id),className:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 transition-colors",title:"Download",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),e.jsx("button",{onClick:()=>N(a),className:"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300 transition-colors",title:"Hapus",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},a.id))})]})}),t.data.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 py-3 flex items-center justify-between border-t border-gray-200 dark:border-gray-700 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>t.links[0].url&&l.get(t.links[0].url),disabled:!t.links[0].url,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>{const a=t.links[t.links.length-1];a.url&&l.get(a.url)},disabled:!t.links[t.links.length-1].url,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Menampilkan ",e.jsx("span",{className:"font-medium",children:t.data.length>0?(t.current_page-1)*t.per_page+1:0})," sampai"," ",e.jsx("span",{className:"font-medium",children:Math.min(t.current_page*t.per_page,t.total)})," dari"," ",e.jsx("span",{className:"font-medium",children:t.total})," hasil"]})}),e.jsx("div",{children:e.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:t.links.map((a,s)=>e.jsx("button",{onClick:()=>a.url&&l.get(a.url),disabled:!a.url,dangerouslySetInnerHTML:{__html:a.label},className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${a.active?"z-10 bg-blue-600 border-blue-600 text-white":"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"} ${a.url?"":"opacity-50 cursor-not-allowed"} ${s===0?"rounded-l-md":""} ${s===t.links.length-1?"rounded-r-md":""}`},s))})})]})]})]})]})]}),e.jsx(A,{show:j,onClose:()=>x(!1),onConfirm:M,title:"Hapus Materi?",message:`Apakah Anda yakin ingin menghapus materi "${o?.judul||""}"? Tindakan ini tidak dapat dibatalkan.`,itemName:o?.judul||""})]})}export{K as default};
