import{a,r as V,j as e,u as K,H as G,L as J,b as y}from"./app--6YDKO9i.js";import{S as Q}from"./Sidebar-BwHeinFr.js";import{H as X}from"./Header-DB4bPmX4.js";import{u as Y,I as ee}from"./ImportModal-CfVtpkHP.js";import{L as te}from"./LoadingButton-ftSELD_9.js";import{D as ae}from"./DeleteConfirmationModal-CoeU6HJm.js";import{T as re}from"./Toast-OAOA4dtC.js";/* empty css            */function F({show:s,onClose:n,onSubmit:N,formData:p,prodis:c,isEdit:m=!1,loading:l=!1}){const{register:d,handleSubmit:k,formState:{errors:o},reset:j}=Y({defaultValues:p});if(a.useEffect(()=>{s&&j(p)},[s,p,j]),a.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]),a.useEffect(()=>{const r=u=>{u.key==="Escape"&&s&&!l&&n()};return s&&document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[s,n,l]),!s)return null;const h=r=>{const u={preventDefault:()=>{}};Object.assign(p,r),N(u)};return V.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
                .modal-no-scrollbar::-webkit-scrollbar {
                    display: none;
                }
            `}),e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",style:{backgroundColor:"rgba(0,0,0,0.8)"},onClick:r=>{r.target===r.currentTarget&&!l&&n()},children:e.jsx("div",{className:"modal-no-scrollbar bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:r=>r.stopPropagation(),style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:e.jsxs("form",{onSubmit:k(h),children:[e.jsx("div",{className:"sticky top-0 bg-white dark:bg-gray-800 px-6 pt-6 pb-4 border-b border-gray-200 dark:border-gray-700 z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:m?"Edit Data Dosen":"Tambah Data Dosen"}),e.jsx("button",{type:"button",onClick:n,disabled:l,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 disabled:opacity-50 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["NIDN ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...d("nidn",{required:"NIDN wajib diisi"}),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Nomor NIDN"}),o.nidn&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:o.nidn.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Nama ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...d("nama",{required:"Nama wajib diisi"}),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Nama lengkap dosen"}),o.nama&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:o.nama.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",...d("email",{required:"Email wajib diisi",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Format email tidak valid"}}),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"email@example.com"}),o.email&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:o.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"No. Telepon"}),e.jsx("input",{type:"text",...d("no_telepon"),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"08xxxxxxxxxx"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pendidikan Terakhir"}),e.jsxs("select",{...d("pendidikan_terakhir"),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Pilih Pendidikan"}),e.jsx("option",{value:"S1",children:"S1"}),e.jsx("option",{value:"S2",children:"S2"}),e.jsx("option",{value:"S3",children:"S3"}),e.jsx("option",{value:"Profesor",children:"Profesor"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Program Studi Mengajar"}),e.jsxs("select",{...d("prodi_id"),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Pilih Prodi"}),c?.map(r=>e.jsxs("option",{value:r.id,children:[r.nama_prodi," - ",r.fakultas?.nama_fakultas]},r.id))]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Password ",!m&&e.jsx("span",{className:"text-red-500",children:"*"}),m&&e.jsx("span",{className:"text-xs text-gray-500",children:"(kosongkan jika tidak diubah)"})]}),e.jsx("input",{type:"password",...d("password",{required:m?!1:"Password wajib diisi",minLength:{value:6,message:"Password minimal 6 karakter"}}),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Minimal 6 karakter"}),o.password&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:o.password.message})]})]})}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 dark:bg-gray-700 px-6 py-4 border-t border-gray-200 dark:border-gray-600 flex flex-col-reverse sm:flex-row sm:justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:n,disabled:l,className:"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-base font-semibold text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Batal"}),e.jsx(te,{type:"submit",loading:l,disabled:l,className:"w-full sm:w-auto px-6 py-3 border border-transparent rounded-lg shadow-sm text-base font-semibold text-white bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105 transition-all duration-200",children:m?"Update":"Simpan"})]})]})})})]}),document.body)}function xe({dosen:s,prodis:n,filters:N}){const c=K().props;c.flash;const[m,l]=a.useState(!1),[d,k]=a.useState({type:"info",message:"",details:[]}),[o,j]=a.useState(()=>{if(typeof window<"u"){const t=localStorage.getItem("darkMode");return t!==null?t==="true":window.matchMedia("(prefers-color-scheme: dark)").matches}return!1}),[h,r]=a.useState(()=>typeof window<"u"?window.innerWidth>=1024:!0),[u,I]=a.useState(N.search||""),[P,S]=a.useState(!1),[x,D]=a.useState(null),[H,E]=a.useState(!1),[B,M]=a.useState(!1),[A,C]=a.useState(!1),[g,f]=a.useState(null),[_,i]=a.useState(!1),[w,L]=a.useState({nidn:"",nama:"",email:"",password:"",no_telepon:"",pendidikan_terakhir:"",prodi_id:""});a.useEffect(()=>{o?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",String(o))},[o]),a.useEffect(()=>{console.log("=== Dosen Flash Effect Triggered ==="),console.log("Props in effect:",c),console.log("Flash in effect:",c?.flash);const t=c?.flash;l(!1),setTimeout(()=>{t?.success?(console.log("Setting SUCCESS toast with message:",t.success),k({type:"success",message:t.success,details:t.import_errors||[]}),l(!0),console.log("Toast state set to TRUE")):t?.error&&(console.log("Setting ERROR toast with message:",t.error),k({type:"error",message:t.error,details:t.import_errors||[]}),l(!0),console.log("Toast state set to TRUE"))},100)},[c]);const T=()=>({nidn:"",nama:"",email:"",password:"",no_telepon:"",pendidikan_terakhir:"",prodi_id:""}),W=t=>{t.preventDefault(),y.get("/admin/dosen",{search:u},{preserveState:!0,replace:!0})},R=t=>{f(t),C(!0)},$=()=>{g&&y.post(`/admin/dosen/${g?.id}`,{_method:"DELETE"},{onSuccess:()=>{C(!1),f(null)}})},z=()=>{L(T()),E(!0)},O=t=>{f(t),L({nidn:t.nidn,nama:t.nama,email:t.user?.email||t.email||"",password:"",no_telepon:t.no_telepon||"",pendidikan_terakhir:t.pendidikan_terakhir||"",prodi_id:t.prodi_id?.toString()||""}),M(!0)},U=t=>{t.preventDefault(),i(!0),y.post("/admin/dosen",w,{onSuccess:()=>{E(!1),L(T()),i(!1)},onError:()=>i(!1),onFinish:()=>i(!1)})},q=t=>{t.preventDefault(),i(!0),y.post(`/admin/dosen/${g?.id}`,{...w,_method:"PUT"},{onSuccess:()=>{M(!1),f(null),i(!1)},onError:()=>i(!1),onFinish:()=>i(!1)})},Z=t=>{if(t.preventDefault(),!x){alert("Silakan pilih file terlebih dahulu");return}console.log("Importing file:",x),console.log("File type:",x.type),console.log("File name:",x.name);const v=new FormData;v.append("file",x,x.name),console.log("FormData created, posting to server..."),y.post("/admin/dosen/import",v,{forceFormData:!0,preserveState:!1,preserveScroll:!1,onSuccess:b=>{console.log("Import success:",b.props.flash),S(!1),D(null)},onError:b=>{console.log("Import errors:",b)}})};return e.jsxs("div",{className:o?"dark":"",children:[e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-300",children:[e.jsx(G,{title:"Data Dosen"}),e.jsx(J,{}),e.jsx(Q,{sidebarOpen:h,setSidebarOpen:r,activeMenu:"dosen"}),e.jsxs("div",{className:`p-4 transition-all duration-300 ${h?"lg:ml-64":"lg:ml-0"}`,children:[e.jsx(X,{sidebarOpen:h,setSidebarOpen:r,darkMode:o,setDarkMode:j,title:"Data Dosen",subtitle:"Kelola data dosen"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 justify-end",children:[e.jsxs("button",{onClick:()=>S(!0),className:"inline-flex items-center px-5 py-2.5 border border-transparent rounded-xl shadow-lg text-sm font-semibold text-white bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 transform hover:scale-105 transition-all duration-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Import Excel"]}),e.jsxs("button",{onClick:z,className:"inline-flex items-center px-5 py-2.5 border border-transparent rounded-xl shadow-lg text-sm font-semibold text-white bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 transform hover:scale-105 transition-all duration-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Tambah Dosen"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("svg",{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pencarian Data"})]}),e.jsxs("form",{onSubmit:W,className:"flex gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Cari NIDN atau Nama...",value:u,onChange:t=>I(t.target.value),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500"})}),e.jsx("div",{children:e.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 text-white px-6 py-3 text-base font-semibold rounded-lg transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Cari"]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl rounded-2xl overflow-hidden border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"NIDN"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nama"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No. Telepon"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Pendidikan"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Prodi Mengajar"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:s.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"Tidak ada data dosen"})}):s.data.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:t.nidn}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:t.nama}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:t.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:t.no_telepon||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:t.pendidikan_terakhir||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-300",children:t.prodi?t.prodi.nama_prodi:"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>O(t),className:"inline-flex items-center justify-center p-2 rounded-lg bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700 transform hover:scale-110 transition-all duration-200 shadow-md hover:shadow-lg",title:"Edit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>R(t),className:"inline-flex items-center justify-center p-2 rounded-lg bg-gradient-to-r from-red-500 to-pink-600 text-white hover:from-red-600 hover:to-pink-700 transform hover:scale-110 transition-all duration-200 shadow-md hover:shadow-lg",title:"Hapus",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},t.id))})]})}),s.links.length>3&&e.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Menampilkan ",s.from," - ",s.to," dari ",s.total," data"]}),e.jsx("div",{className:"flex gap-2",children:s.links.map((t,v)=>{const b=t.url?"a":"span";return e.jsx(b,{href:t.url||void 0,className:`px-3 py-1 rounded ${t.active?"bg-blue-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 border dark:border-gray-600"} ${!t.url&&"cursor-not-allowed opacity-50"}`,dangerouslySetInnerHTML:{__html:t.label}},v)})})]})})]})]})]})]}),e.jsx(ee,{show:P,onClose:()=>{S(!1),D(null)},onSubmit:Z,file:x,setFile:D,templateUrl:"/admin/dosen/template/download",entityName:"Dosen"}),e.jsx(F,{show:H,onClose:()=>E(!1),onSubmit:U,formData:w,prodis:n,isEdit:!1,loading:_}),e.jsx(F,{show:B,onClose:()=>M(!1),onSubmit:q,formData:w,prodis:n,isEdit:!0,loading:_}),e.jsx(ae,{show:A,onClose:()=>{C(!1),f(null)},onConfirm:$,title:"Hapus Data Dosen",message:"Apakah Anda yakin ingin menghapus data dosen",itemName:g?`${g.nama} (${g.nidn})`:""}),m&&e.jsx(re,{type:d.type,message:d.message,details:d.details,onClose:()=>{console.log("Toast onClose called"),l(!1)},duration:d.details?.length>0?8e3:5e3})]})}export{xe as default};
