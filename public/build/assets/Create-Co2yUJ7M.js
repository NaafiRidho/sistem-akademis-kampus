import{a as d,e as C,j as e,H as I,b as f}from"./app--6YDKO9i.js";import{D as A}from"./DosenSidebar-DXVPBAMm.js";import{H}from"./Header-DB4bPmX4.js";/* empty css            */function D({jadwalList:k}){const[n,j]=d.useState(()=>{if(typeof window<"u"){const a=localStorage.getItem("darkMode");return a!==null?a==="true":window.matchMedia("(prefers-color-scheme: dark)").matches}return!1}),[m,b]=d.useState(()=>typeof window<"u"?window.innerWidth>=1024:!0),[l,w]=d.useState(""),[o,N]=d.useState(new Date().toISOString().split("T")[0]),[s,x]=d.useState([]),[h,y]=d.useState(!1),[p,g]=d.useState(!1);d.useEffect(()=>{n?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",String(n))},[n]),d.useEffect(()=>{l&&o&&v()},[l,o]);const v=async()=>{y(!0);try{const a=await C.get("/dosen/absensi/mahasiswa",{params:{jadwal_id:l,tanggal:o}});x(a.data.mahasiswa)}catch(a){console.error("Error loading mahasiswa:",a)}finally{y(!1)}},c=(a,r)=>{x(t=>t.map(i=>i.id===a?{...i,status:r}:i))},S=(a,r)=>{x(t=>t.map(i=>i.id===a?{...i,keterangan:r}:i))},u=a=>{x(r=>r.map(t=>({...t,status:a})))},M=a=>{if(a.preventDefault(),!l){alert("Pilih jadwal terlebih dahulu");return}const r=s.filter(t=>t.status).map(t=>({mahasiswa_id:t.id,status:t.status,keterangan:t.keterangan||""}));if(r.length===0){alert("Harap isi status absensi minimal untuk 1 mahasiswa");return}g(!0),f.post("/dosen/absensi",{jadwal_id:l,tanggal:o,absensi:r},{preserveScroll:!0,onSuccess:()=>{g(!1)},onError:t=>{console.error("Error:",t),g(!1)}})};return e.jsx("div",{className:n?"dark":"",children:e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-300",children:[e.jsx(I,{title:"Input Absensi"}),e.jsx(A,{sidebarOpen:m,setSidebarOpen:b,activeMenu:"absensi"}),e.jsxs("div",{className:`p-4 transition-all duration-300 ${m?"lg:ml-64":"lg:ml-0"}`,children:[e.jsx(H,{sidebarOpen:m,setSidebarOpen:b,darkMode:n,setDarkMode:j,title:"Input Absensi",subtitle:"Input kehadiran mahasiswa untuk pertemuan kuliah"}),e.jsxs("div",{className:"mt-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"âœï¸ Input Absensi Mahasiswa"}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold text-sm",children:"1"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Pilih Jadwal"})]}),e.jsx("div",{className:"flex-1 h-0.5 bg-gray-300 dark:bg-gray-600"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${l&&s.length>0?"bg-blue-600 text-white":"bg-gray-300 dark:bg-gray-600 text-gray-500"} flex items-center justify-center font-bold text-sm`,children:"2"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Isi Kehadiran"})]}),e.jsx("div",{className:"flex-1 h-0.5 bg-gray-300 dark:bg-gray-600"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-300 dark:bg-gray-600 text-gray-500 flex items-center justify-center font-bold text-sm",children:"3"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Simpan"})]})]})]}),e.jsxs("form",{onSubmit:M,children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 mb-6 border-2 border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold text-sm",children:"1"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pilih Jadwal & Tanggal Pertemuan"})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 ml-10",children:"Tentukan kelas dan tanggal pertemuan untuk input absensi"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 ml-10",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["ðŸ“š Jadwal Kuliah ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:l,onChange:a=>w(a.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all",required:!0,children:[e.jsx("option",{value:"",children:"-- Pilih Mata Kuliah & Kelas --"}),k.map(a=>e.jsxs("option",{value:a.id,children:[a.mata_kuliah," - ",a.kelas," (",a.hari,")"]},a.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["ðŸ“… Tanggal Pertemuan ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:o,onChange:a=>N(a.target.value),max:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white transition-all",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Maksimal hari ini"})]})]})]}),l&&s.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border-2 border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"px-6 py-5 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold text-sm",children:"2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Isi Status Kehadiran"})]}),e.jsxs("span",{className:"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 px-3 py-1 rounded-full text-sm font-semibold",children:[s.length," Mahasiswa"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 font-medium",children:"Set Semua:"}),e.jsxs("button",{type:"button",onClick:()=>u("Hadir"),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm rounded-lg transition-colors font-medium shadow-sm flex items-center gap-1.5",children:[e.jsx("span",{children:"âœ…"})," Semua Hadir"]}),e.jsxs("button",{type:"button",onClick:()=>u("Izin"),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg transition-colors font-medium shadow-sm flex items-center gap-1.5",children:[e.jsx("span",{children:"ðŸ“"})," Semua Izin"]}),e.jsxs("button",{type:"button",onClick:()=>u("Alpa"),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm rounded-lg transition-colors font-medium shadow-sm flex items-center gap-1.5",children:[e.jsx("span",{children:"âŒ"})," Semua Alpa"]}),e.jsxs("div",{className:"ml-auto text-sm text-gray-600 dark:text-gray-400",children:["Terisi: ",e.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:s.filter(a=>a.status).length})," / ",s.length]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full bg-white dark:bg-gray-800",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b-2 border-gray-200 dark:border-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase w-16",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase",children:"Mahasiswa"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase",children:"Status Kehadiran"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 dark:text-gray-200 uppercase",children:"Keterangan (Opsional)"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:s.map((a,r)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors",children:[e.jsx("td",{className:"px-4 py-4 text-sm font-medium text-gray-900 dark:text-gray-100",children:r+1}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:a.nama}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.nim})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{type:"button",onClick:()=>c(a.id,"Hadir"),className:`px-4 py-2 rounded-lg text-sm font-semibold transition-all ${a.status==="Hadir"?"bg-green-600 text-white shadow-md transform scale-105":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-green-100 dark:hover:bg-green-900/20"}`,children:"âœ… Hadir"}),e.jsx("button",{type:"button",onClick:()=>c(a.id,"Izin"),className:`px-4 py-2 rounded-lg text-sm font-semibold transition-all ${a.status==="Izin"?"bg-blue-600 text-white shadow-md transform scale-105":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-blue-100 dark:hover:bg-blue-900/20"}`,children:"ðŸ“ Izin"}),e.jsx("button",{type:"button",onClick:()=>c(a.id,"Sakit"),className:`px-4 py-2 rounded-lg text-sm font-semibold transition-all ${a.status==="Sakit"?"bg-yellow-600 text-white shadow-md transform scale-105":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-yellow-100 dark:hover:bg-yellow-900/20"}`,children:"ðŸ¥ Sakit"}),e.jsx("button",{type:"button",onClick:()=>c(a.id,"Alpa"),className:`px-4 py-2 rounded-lg text-sm font-semibold transition-all ${a.status==="Alpa"?"bg-red-600 text-white shadow-md transform scale-105":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-red-100 dark:hover:bg-red-900/20"}`,children:"âŒ Alpa"})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("input",{type:"text",value:a.keterangan||"",onChange:t=>S(a.id,t.target.value),placeholder:"Catatan (jika ada)...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white placeholder-gray-400"})})]},a.id))})]})}),e.jsx("div",{className:"px-6 py-5 bg-gray-50 dark:bg-gray-750 border-t-2 border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.filter(a=>a.status).length===0?e.jsx("span",{className:"text-orange-600 dark:text-orange-400 font-medium",children:"âš ï¸ Harap isi minimal 1 status mahasiswa"}):e.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:["âœ“ Siap disimpan (",s.filter(a=>a.status).length," mahasiswa terisi)"]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>f.get("/dosen/absensi"),className:"px-6 py-2.5 bg-gray-300 dark:bg-gray-700 hover:bg-gray-400 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg font-semibold transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",disabled:p||s.filter(a=>a.status).length===0,className:"px-8 py-2.5 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-md flex items-center gap-2",children:p?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Menyimpan..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Simpan Absensi"]})})]})]})})]}),h&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-12 border-2 border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-200 dark:border-blue-800"}),e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-blue-600 absolute top-0 left-0"})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-6 font-medium text-lg",children:"Memuat Data Mahasiswa..."}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-2",children:"Mohon tunggu sebentar"})]})}),!h&&l&&s.length===0&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-12 border-2 border-yellow-200 dark:border-yellow-800",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900/20 rounded-full p-6 mb-4",children:e.jsx("svg",{className:"w-16 h-16 text-yellow-600 dark:text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Tidak Ada Mahasiswa"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-sm text-center",children:["Kelas ini belum memiliki mahasiswa.",e.jsx("br",{}),"Silakan pilih jadwal kelas lain."]})]})})]})]})]})]})})}export{D as default};
