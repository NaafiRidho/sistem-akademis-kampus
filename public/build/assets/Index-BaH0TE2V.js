import{a as s,r as V,j as e,H as J,b}from"./app-rqAKm7F0.js";import{S as Q,H as X}from"./Header-Dgp0CeEs.js";import{D as Y,I as Z,T as D}from"./Toast-D0EGW6dg.js";/* empty css            */function ee({show:k,onClose:x,onSubmit:y,formData:r,setFormData:l,mahasiswa:w,mataKuliah:u,isEdit:o}){if(!k)return null;const[m,c]=s.useState(0),[i,n]=s.useState("");return s.useEffect(()=>{const t=parseFloat(r.tugas)||0,h=parseFloat(r.uts)||0,f=parseFloat(r.uas)||0,d=t*.3+h*.3+f*.4;c(d),d>=85?n("A"):d>=70?n("B"):d>=60?n("C"):d>=50?n("D"):n("E")},[r.tugas,r.uts,r.uas]),V.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",style:{backgroundColor:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center"},onClick:t=>{t.target===t.currentTarget&&x()},children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-2xl mx-4",onClick:t=>t.stopPropagation(),children:e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"px-6 pt-6 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o?"Edit Nilai Mahasiswa":"Tambah Nilai Mahasiswa"}),e.jsx("button",{type:"button",onClick:x,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Mahasiswa ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:r.mahasiswa_id,onChange:t=>l({...r,mahasiswa_id:t.target.value}),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,disabled:o,children:[e.jsx("option",{value:"",children:"Pilih Mahasiswa"}),w.map(t=>e.jsxs("option",{value:t.id,children:[t.nim," - ",t.nama]},t.id))]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Mata Kuliah ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:r.mata_kuliah_id,onChange:t=>l({...r,mata_kuliah_id:t.target.value}),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,disabled:o,children:[e.jsx("option",{value:"",children:"Pilih Mata Kuliah"}),u.map(t=>e.jsxs("option",{value:t.id,children:[t.kode_mk," - ",t.nama_mk]},t.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Nilai Tugas (30%) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:r.tugas,onChange:t=>l({...r,tugas:t.target.value}),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"0-100",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Nilai UTS (30%) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:r.uts,onChange:t=>l({...r,uts:t.target.value}),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"0-100",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Nilai UAS (40%) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:r.uas,onChange:t=>l({...r,uas:t.target.value}),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"0-100",required:!0})]}),e.jsx("div",{className:"md:col-span-2 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-700 dark:to-gray-600 p-4 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-1",children:"Nilai Akhir"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:m.toFixed(2)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-1",children:"Grade"}),e.jsx("span",{className:`inline-block px-4 py-2 text-2xl font-bold rounded-lg ${i==="A"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":i==="B"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":i==="C"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":i==="D"?"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:i})]})]})})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 px-6 py-4 sm:flex sm:flex-row-reverse gap-3",children:[e.jsxs("button",{type:"submit",className:"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-transparent rounded-lg shadow-sm text-base font-semibold text-white bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 transform hover:scale-105 transition-all duration-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),o?"Update":"Simpan"]}),e.jsx("button",{type:"button",onClick:x,className:"mt-3 sm:mt-0 w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm text-base font-semibold text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Batal"})]})]})})}),document.body)}function le({nilai:k,mahasiswa:x,mataKuliah:y,flash:r}){const[l,w]=s.useState(()=>{if(typeof window<"u"){const a=localStorage.getItem("darkMode");return a!==null?a==="true":window.matchMedia("(prefers-color-scheme: dark)").matches}return!1}),[u,o]=s.useState(()=>typeof window<"u"?window.innerWidth>=1024:!0),[m,c]=s.useState(!1),[i,n]=s.useState("create"),[t,h]=s.useState(null),[f,d]=s.useState(!1),[B,j]=s.useState(!1),[v,N]=s.useState(null),[p,E]=s.useState(""),[S,I]=s.useState(""),[M,L]=s.useState(!1),[H,F]=s.useState(""),[G,W]=s.useState("success"),[C,_]=s.useState({mahasiswa_id:"",mata_kuliah_id:"",tugas:"",uts:"",uas:""}),T=(a,g)=>{F(a),W(g),L(!0)};r.success&&!M&&T(r.success,"success"),r.error&&!M&&T(r.error,"error");const U=()=>{n("create"),_({mahasiswa_id:"",mata_kuliah_id:"",tugas:"",uts:"",uas:""}),c(!0)},$=a=>{n("edit"),h(a),_({mahasiswa_id:a.mahasiswa_id.toString(),mata_kuliah_id:a.mata_kuliah_id.toString(),tugas:a.tugas.toString(),uts:a.uts.toString(),uas:a.uas.toString()}),c(!0)},q=a=>{a.preventDefault(),i==="create"?b.post("/admin/nilai",C,{onSuccess:()=>c(!1)}):t&&b.put(`/admin/nilai/${t.id}`,C,{onSuccess:()=>c(!1)})},P=a=>{h(a),d(!0)},z=()=>{t&&b.delete(`/admin/nilai/${t.id}`,{onSuccess:()=>d(!1)})},K=()=>{if(v){const a=new FormData;a.append("file",v),b.post("/admin/nilai/import",a,{onSuccess:()=>{j(!1),N(null)}})}},A=k.data.filter(a=>{const g=a.mahasiswa.nama.toLowerCase().includes(p.toLowerCase())||a.mahasiswa.nim.toLowerCase().includes(p.toLowerCase())||a.mata_kuliah.nama_mk.toLowerCase().includes(p.toLowerCase()),O=S===""||a.grade===S;return g&&O}),R=a=>{switch(a){case"A":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"B":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"C":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"D":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"E":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}};return s.useEffect(()=>{l?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",String(l))},[l]),e.jsxs("div",{className:l?"dark":"",children:[e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-300",children:[e.jsx(J,{title:"Nilai Mahasiswa"}),e.jsx(Q,{sidebarOpen:u,setSidebarOpen:o,activeMenu:"nilai"}),e.jsxs("div",{className:`p-4 transition-all duration-300 ${u?"lg:ml-64":"lg:ml-0"}`,children:[e.jsx(X,{sidebarOpen:u,setSidebarOpen:o,darkMode:l,setDarkMode:w,title:"Nilai Mahasiswa",subtitle:"Kelola nilai mahasiswa"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 justify-end",children:[e.jsxs("button",{onClick:()=>j(!0),className:"inline-flex items-center px-5 py-2.5 border border-transparent rounded-xl shadow-lg text-sm font-semibold text-white bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 transform hover:scale-105 transition-all duration-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Import Excel"]}),e.jsxs("button",{onClick:U,className:"inline-flex items-center px-5 py-2.5 border border-transparent rounded-xl shadow-lg text-sm font-semibold text-white bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 transform hover:scale-105 transition-all duration-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Tambah Nilai"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("svg",{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pencarian & Filter"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Cari mahasiswa, NIM, mata kuliah...",value:p,onChange:a=>E(a.target.value),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500"})}),e.jsx("div",{children:e.jsxs("select",{value:S,onChange:a=>I(a.target.value),className:"px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Semua Grade"}),e.jsx("option",{value:"A",children:"A"}),e.jsx("option",{value:"B",children:"B"}),e.jsx("option",{value:"C",children:"C"}),e.jsx("option",{value:"D",children:"D"}),e.jsx("option",{value:"E",children:"E"})]})})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-xl rounded-2xl overflow-hidden border border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"NIM"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nama Mahasiswa"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Mata Kuliah"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Tugas"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"UTS"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"UAS"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nilai Akhir"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Grade"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:A.length>0?A.map((a,g)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:g+1}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-300",children:a.mahasiswa.nim}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-gray-300",children:a.mahasiswa.nama}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-gray-300",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.mata_kuliah.nama_mk}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.mata_kuliah.kode_mk})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-900 dark:text-gray-300",children:a.tugas}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-900 dark:text-gray-300",children:a.uts}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-900 dark:text-gray-300",children:a.uas}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-bold text-blue-600 dark:text-blue-400",children:a.nilai_akhir.toFixed(2)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm",children:e.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${R(a.grade)}`,children:a.grade})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>$(a),className:"p-2 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 bg-blue-50 dark:bg-blue-900/30 rounded-lg shadow-md hover:shadow-lg transform hover:scale-110 transition-all duration-200",title:"Edit",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>P(a),className:"p-2 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/30 rounded-lg shadow-md hover:shadow-lg transform hover:scale-110 transition-all duration-200",title:"Hapus",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"px-6 py-8 text-center text-sm text-gray-500 dark:text-gray-400",children:"Tidak ada data nilai"})})})]})})})]})]})]}),m&&e.jsx(ee,{show:m,onClose:()=>c(!1),onSubmit:q,formData:C,setFormData:_,mahasiswa:x,mataKuliah:y,isEdit:i==="edit"}),e.jsx(Y,{show:f,onClose:()=>d(!1),onConfirm:z,title:"Hapus Nilai",message:`Apakah Anda yakin ingin menghapus nilai untuk mata kuliah ${t?.mata_kuliah.nama_mk}?`,itemName:t?.mahasiswa.nama||""}),e.jsx(Z,{show:B,onClose:()=>{j(!1),N(null)},onSubmit:K,file:v,setFile:N,templateUrl:"/admin/nilai/template",entityName:"Nilai"}),M&&e.jsx(D,{message:H,type:G,onClose:()=>L(!1)})]})}export{le as default};
