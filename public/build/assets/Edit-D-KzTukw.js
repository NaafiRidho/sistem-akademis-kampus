import{a as l,j as e,H as S,c as M,b as j}from"./app-ChGtWkZu.js";import{D as C}from"./DosenSidebar-Bn9LSuQK.js";import{H as F}from"./Header-CIFYwiEZ.js";/* empty css            */function z({tugas:d,mataKuliahList:g=[]}){const[o,y]=l.useState(()=>{if(typeof window<"u"){const a=localStorage.getItem("darkMode");return a!==null?a==="true":window.matchMedia("(prefers-color-scheme: dark)").matches}return!1}),[x,f]=l.useState(()=>typeof window<"u"?window.innerWidth>=1024:!0),v=a=>{const s=new Date(a),i=s.getTimezoneOffset();return new Date(s.getTime()-i*60*1e3).toISOString().slice(0,16)},[t,c]=l.useState({mata_kuliah_id:d.mata_kuliah_id.toString(),judul:d.judul,deskripsi:d.deskripsi,deadline:v(d.deadline),file:null}),[r,n]=l.useState({}),[p,u]=l.useState(!1),[m,w]=l.useState(""),[h,T]=l.useState(d.file_path||"");l.useEffect(()=>{o?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",String(o))},[o]);const N=a=>{const s=a.target.files?.[0];if(s){if(s.size>10*1024*1024){n({...r,file:"Ukuran file maksimal 10MB"});return}if(!["application/pdf","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(s.type)){n({...r,file:"Format file harus PDF, PPT, atau DOC"});return}c({...t,file:s}),w(s.name),n({...r,file:""})}},_=a=>{a.preventDefault(),u(!0),n({});const s={};if(t.mata_kuliah_id||(s.mata_kuliah_id="Mata kuliah harus dipilih"),t.judul.trim()||(s.judul="Judul tugas harus diisi"),t.deskripsi.trim()||(s.deskripsi="Deskripsi tugas harus diisi"),t.deadline||(s.deadline="Deadline harus diisi"),Object.keys(s).length>0){n(s),u(!1);return}const i=new FormData;i.append("_method","PUT"),i.append("mata_kuliah_id",t.mata_kuliah_id),i.append("judul",t.judul),i.append("deskripsi",t.deskripsi),i.append("deadline",t.deadline),t.file&&i.append("file",t.file),j.post(`/dosen/tugas/${d.id}`,i,{preserveScroll:!0,onSuccess:()=>{u(!1)},onError:k=>{n(k),u(!1)}})},b=a=>{switch(a.split(".").pop()?.toLowerCase()){case"pdf":return e.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})});case"ppt":case"pptx":return e.jsx("svg",{className:"w-8 h-8 text-orange-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})});case"doc":case"docx":return e.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})});default:return null}},D=()=>new Date().toISOString().slice(0,16);return e.jsx("div",{className:o?"dark":"",children:e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-300",children:[e.jsx(S,{title:"Edit Tugas"}),e.jsx(C,{sidebarOpen:x,setSidebarOpen:f,activeMenu:"tugas"}),e.jsxs("div",{className:`p-4 transition-all duration-300 ${x?"lg:ml-64":"lg:ml-0"}`,children:[e.jsx(F,{sidebarOpen:x,setSidebarOpen:f,darkMode:o,setDarkMode:y,title:"Edit Tugas",subtitle:"Ubah informasi tugas"}),e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("div",{className:"mb-4",children:e.jsxs(M,{href:"/dosen/tugas",className:"inline-flex items-center px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Kembali ke Daftar Tugas"]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Form Edit Tugas"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Ubah detail tugas untuk mahasiswa"})]}),e.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Mata Kuliah"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:t.mata_kuliah_id,onChange:a=>c({...t,mata_kuliah_id:a.target.value}),className:`w-full px-4 py-2.5 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${r.mata_kuliah_id?"border-red-500":"border-gray-300 dark:border-gray-600"}`,children:[e.jsx("option",{value:"",children:"Pilih Mata Kuliah"}),g&&g.map(a=>e.jsxs("option",{value:a.id,children:[a.kode_mk," - ",a.nama_mk," (",a.sks," SKS)"," ",a.kelas&&a.kelas.length>0?`- Kelas: ${a.kelas.join(", ")}`:""]},a.id))]}),r.mata_kuliah_id&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:r.mata_kuliah_id})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Judul Tugas"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.judul,onChange:a=>c({...t,judul:a.target.value}),placeholder:"Contoh: Tugas Praktikum 1 - Membuat Aplikasi CRUD",className:`w-full px-4 py-2.5 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${r.judul?"border-red-500":"border-gray-300 dark:border-gray-600"}`}),r.judul&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:r.judul})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Deskripsi Tugas"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:t.deskripsi,onChange:a=>c({...t,deskripsi:a.target.value}),rows:6,placeholder:"Jelaskan detail tugas, kriteria penilaian, dan instruksi pengerjaan...",className:`w-full px-4 py-2.5 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${r.deskripsi?"border-red-500":"border-gray-300 dark:border-gray-600"}`}),r.deskripsi&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:r.deskripsi})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Deadline"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"datetime-local",value:t.deadline,onChange:a=>c({...t,deadline:a.target.value}),min:D(),className:`w-full px-4 py-2.5 border rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${r.deadline?"border-red-500":"border-gray-300 dark:border-gray-600"}`}),r.deadline&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:r.deadline})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"File Pendukung"}),h&&!m&&e.jsxs("div",{className:"mb-3 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[b(h),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["File saat ini: ",h.split("/").pop()]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Upload file baru untuk mengganti"})]})]}),e.jsx("a",{href:`/dosen/tugas/${d.id}/download`,className:"px-3 py-1 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors",children:"Download"})]}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center ${r.file?"border-red-500":"border-gray-300 dark:border-gray-600"}`,children:[e.jsx("input",{type:"file",id:"file-upload",accept:".pdf,.ppt,.pptx,.doc,.docx",onChange:N,className:"hidden"}),e.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center",children:m?e.jsxs("div",{className:"flex items-center space-x-3",children:[b(m),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:m}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.file?`${(t.file.size/1024/1024).toFixed(2)} MB`:""})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:e.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:e.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:"Klik untuk upload file baru"})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"PDF, PPT, PPTX, DOC, DOCX (maksimal 10MB)"})]})})]}),r.file&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:r.file})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>j.get("/dosen/tugas"),className:"px-6 py-2.5 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",disabled:p,className:`px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-200 flex items-center space-x-2 ${p?"opacity-50 cursor-not-allowed":""}`,children:p?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Menyimpan..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:"Simpan Perubahan"})]})})]})]})]})]})]})]})})}export{z as default};
