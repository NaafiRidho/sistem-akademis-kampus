import{r as V,j as e,a as s,H as J,L as Q,b as w}from"./app-rqAKm7F0.js";import{S as X,H as Y}from"./Header-Dgp0CeEs.js";import{D as Z,I as ee,T as ae}from"./Toast-D0EGW6dg.js";/* empty css            */function re({show:d,onClose:c,onSubmit:x,formData:o,setFormData:m,prodi:g,isEdit:h,isLoading:n=!1}){return console.log("ðŸš€ MataKuliahFormModal - show:",d,"isLoading:",n),d?(console.log("âœ… MataKuliahModal RENDERING via Portal"),V.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",style:{backgroundColor:"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",justifyContent:"center"},onClick:r=>{r.target===r.currentTarget&&(console.log("ðŸ”´ Overlay clicked - closing"),c())},children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-2xl mx-4",onClick:r=>r.stopPropagation(),children:e.jsx("form",{onSubmit:x,children:e.jsxs("div",{className:"px-6 pt-6 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:h?"Edit Mata Kuliah":"Tambah Mata Kuliah"}),e.jsx("button",{type:"button",onClick:c,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["Kode Mata Kuliah ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o.kode_mk,onChange:r=>m({...o,kode_mk:r.target.value}),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Contoh: TIF101",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["Nama Mata Kuliah ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o.nama_mk,onChange:r=>m({...o,nama_mk:r.target.value}),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Contoh: Pemrograman Dasar",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["SKS ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:"1",max:"6",value:o.sks,onChange:r=>m({...o,sks:r.target.value}),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"1-6",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:["Program Studi ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:o.prodi_id,onChange:r=>m({...o,prodi_id:r.target.value}),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"Pilih Program Studi"}),g.map(r=>e.jsxs("option",{value:r.id,children:[r.nama_prodi," - ",r.fakultas.nama_fakultas]},r.id))]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:c,disabled:n,className:"px-6 py-2.5 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Batal"}),e.jsxs("button",{type:"submit",disabled:n,className:"px-6 py-2.5 text-sm font-semibold text-white bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center gap-2",children:[n&&e.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n?"Menyimpan...":h?"Perbarui":"Simpan"]})]})]})})})}),document.body)):null}function de({mataKuliah:d,prodi:c,flash:x}){console.log("MataKuliah Index loaded",{mataKuliah:d,prodi:c});const[o,m]=s.useState(()=>{if(typeof window<"u"){const a=localStorage.getItem("darkMode");return a!==null?a==="true":window.matchMedia("(prefers-color-scheme: dark)").matches}return!1}),[g,h]=s.useState(()=>typeof window<"u"?window.innerWidth>=1024:!0),[n,r]=s.useState(!1),[L,T]=s.useState("create"),[i,u]=s.useState(null),[K,f]=s.useState(!1),[P,N]=s.useState(!1),[M,S]=s.useState(null),[y,H]=s.useState(""),[C,A]=s.useState(""),[F,E]=s.useState(!1),[D,z]=s.useState(""),[B,U]=s.useState("success"),[j,p]=s.useState(!1),[b,v]=s.useState({kode_mk:"",nama_mk:"",sks:"",prodi_id:""}),k=(a,t)=>{z(a),U(t),E(!0)};s.useEffect(()=>{x?.success&&k(x.success,"success"),x?.error&&k(x.error,"error")},[x]);const W=()=>{T("create"),v({kode_mk:"",nama_mk:"",sks:"",prodi_id:""}),r(!0)},O=a=>{T("edit"),u(a),v({kode_mk:a.kode_mk,nama_mk:a.nama_mk,sks:a.sks.toString(),prodi_id:a.prodi_id.toString()}),r(!0)},G=a=>{a.preventDefault(),p(!0),L==="create"?(console.log("Creating mata kuliah:",b),w.post("/admin/matakuliah",b,{preserveScroll:!0,onSuccess:t=>{console.log("Create success",t),r(!1),v({kode_mk:"",nama_mk:"",sks:"",prodi_id:""})},onError:t=>{console.error("Create error:",t),r(!1);const l=Object.values(t).flat(),_=l.length>0?l.join(", "):"Gagal menambahkan data mata kuliah";k(_,"error")},onFinish:()=>{console.log("Create finished"),p(!1)}})):i&&(console.log("Updating mata kuliah:",i.id,b),w.post(`/admin/matakuliah/${i.id}`,{...b,_method:"PUT"},{preserveScroll:!0,onSuccess:t=>{console.log("Update success",t),r(!1),u(null)},onError:t=>{console.error("Update error:",t),r(!1),u(null);const l=Object.values(t).flat(),_=l.length>0?l.join(", "):"Gagal memperbarui data mata kuliah";k(_,"error")},onFinish:()=>{console.log("Update finished"),p(!1)}}))},R=a=>{u(a),f(!0)},$=()=>{i&&(p(!0),console.log("Deleting mata kuliah:",i.id),w.delete(`/admin/matakuliah/${i.id}`,{preserveScroll:!0,onSuccess:()=>{console.log("Delete success"),f(!1),u(null)},onError:a=>{console.error("Delete error:",a),f(!1),u(null);const t=Object.values(a).flat(),l=t.length>0?t.join(", "):"Gagal menghapus data mata kuliah";k(l,"error")},onFinish:()=>{p(!1)}}))},q=a=>{if(a.preventDefault(),!M){alert("Silakan pilih file terlebih dahulu");return}const t=new FormData;t.append("file",M),w.post("/admin/matakuliah/import",t,{onSuccess:l=>{console.log("Import success:",l.props.flash),N(!1),S(null)},onError:l=>{console.log("Import errors:",l)}})},I=d.data.filter(a=>{const t=a.nama_mk.toLowerCase().includes(y.toLowerCase())||a.kode_mk.toLowerCase().includes(y.toLowerCase())||a.prodi.nama_prodi.toLowerCase().includes(y.toLowerCase()),l=C===""||a.prodi_id.toString()===C;return t&&l});return s.useEffect(()=>{console.log("MataKuliah useEffect running",{darkMode:o}),o?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",String(o))},[o]),console.log("About to render, showModal:",n),e.jsxs("div",{className:o?"dark":"",style:{minHeight:"100vh",backgroundColor:o?"#111827":"#f3f4f6"},children:[e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-300",children:[e.jsx(J,{title:"Mata Kuliah"}),e.jsx(X,{sidebarOpen:g,setSidebarOpen:h,activeMenu:"matakuliah"}),e.jsxs("div",{className:`p-4 transition-all duration-300 ${g?"lg:ml-64":"lg:ml-0"}`,children:[e.jsx("h1",{style:{color:"white",fontSize:"24px",padding:"20px"},children:"MATA KULIAH PAGE TEST"}),e.jsx(Y,{sidebarOpen:g,setSidebarOpen:h,darkMode:o,setDarkMode:m,title:"Mata Kuliah",subtitle:"Kelola data mata kuliah"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 justify-end",children:[e.jsxs("button",{onClick:()=>N(!0),className:"inline-flex items-center px-5 py-2.5 border border-transparent rounded-xl shadow-lg text-sm font-semibold text-white bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 transform hover:scale-105 transition-all duration-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Import Excel"]}),e.jsxs("button",{onClick:W,className:"inline-flex items-center px-5 py-2.5 border border-transparent rounded-xl shadow-lg text-sm font-semibold text-white bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 transform hover:scale-105 transition-all duration-200",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Tambah Mata Kuliah"]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl rounded-2xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("svg",{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pencarian & Filter"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Cari kode, nama mata kuliah, prodi...",value:y,onChange:a=>H(a.target.value),className:"w-full px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500"})}),e.jsx("div",{children:e.jsxs("select",{value:C,onChange:a=>A(a.target.value),className:"px-4 py-3 text-base border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-lg shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Semua Prodi"}),c.map(a=>e.jsx("option",{value:a.id,children:a.nama_prodi},a.id))]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-xl rounded-2xl overflow-hidden border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Kode MK"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nama Mata Kuliah"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"SKS"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Prodi"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:I.length>0?I.map((a,t)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:t+1}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-300",children:a.kode_mk}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-gray-300",children:a.nama_mk}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-900 dark:text-gray-300",children:e.jsxs("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:[a.sks," SKS"]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-gray-300",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.prodi.nama_prodi}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.prodi.fakultas.nama_fakultas})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>O(a),className:"p-2 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 bg-blue-50 dark:bg-blue-900/30 rounded-lg shadow-md hover:shadow-lg transform hover:scale-110 transition-all duration-200",title:"Edit",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>R(a),className:"p-2 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/30 rounded-lg shadow-md hover:shadow-lg transform hover:scale-110 transition-all duration-200",title:"Hapus",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-sm text-gray-500 dark:text-gray-400",children:"Tidak ada data mata kuliah"})})})]})}),d.links&&d.links.length>3&&e.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 py-3 border-t border-gray-200 dark:border-gray-700 sm:px-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Menampilkan ",e.jsx("span",{className:"font-semibold",children:d.from||0})," - ",e.jsx("span",{className:"font-semibold",children:d.to||0})," dari ",e.jsx("span",{className:"font-semibold",children:d.total})," data"]}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:d.links.map((a,t)=>a.url?e.jsx(Q,{href:a.url,preserveScroll:!0,className:`px-3 py-2 text-sm rounded-lg transition-all duration-200 ${a.active?"bg-indigo-600 text-white font-semibold shadow-md":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600"}`,dangerouslySetInnerHTML:{__html:a.label}},t):e.jsx("span",{className:"px-3 py-2 text-sm rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500 border border-gray-200 dark:border-gray-600 cursor-not-allowed",dangerouslySetInnerHTML:{__html:a.label}},t))})]})})]})]})]})]}),n&&e.jsx(re,{show:n,onClose:()=>r(!1),onSubmit:G,formData:b,setFormData:v,prodi:c,isEdit:L==="edit",isLoading:j}),e.jsx(Z,{show:K,onClose:()=>f(!1),onConfirm:$,title:"Hapus Mata Kuliah",message:`Apakah Anda yakin ingin menghapus mata kuliah "${i?.nama_mk}"?`,itemName:i?.kode_mk||"",isLoading:j}),e.jsx(ee,{show:P,onClose:()=>{N(!1),S(null)},onSubmit:q,file:M,setFile:S,templateUrl:"/admin/matakuliah/template/download",entityName:"Mata Kuliah",isLoading:j}),F&&e.jsx(ae,{message:D,type:B,onClose:()=>E(!1)}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999] flex items-center justify-center",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-gray-200 dark:border-gray-700 rounded-full"}),e.jsx("div",{className:"absolute top-0 left-0 w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Memproses..."}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Mohon tunggu sebentar"})]}),e.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:"0%"})]})})]})}export{de as default};
